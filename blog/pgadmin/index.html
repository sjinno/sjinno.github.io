<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/main.css">
    <title>Shohei Jinno</title>
    <link rel="shortcut icon" href=&#x2F;images&#x2F;pepe-16-270481.png type="image/x-icon">
</head>

<body>
    
<nav class="nav">
    <a href="/" class="nav__home">Shohei Jinno</a>
    <button class="hamburger">
        <span class="hamburger__patty1"></span>
        <span class="hamburger__patty2"></span>
    </button>

    <div class="nav__menu">
        <ul class="nav__list">
            <li class="nav__item"><a href="/blog">Blog</a></li>
            <li class="nav__item"><a href="/projects">Projects</a></li>
            <li class="nav__item">
                <a href="http://github.com/sjinno" target="_blank">
                    <span class="upper-right-arrow">↗</span> <span class="nav__item">GitHub</span>
                </a>
            </li>
            <li><a href="http://www.linkedin.com/in/shohei-jinno-947a88121" target="_blank"><span class="upper-right-arrow">↗</span>
                    LinkedIn</a>
            </li>
            <li><a href="http://www.instagram.com/shoelric" target="_blank"><span class="upper-right-arrow">↗</span> Instagram</a>
            </li>
            <li><a href="http://stackoverflow.com/users/4909849/syohey" target="_blank"><span class="upper-right-arrow">↗</span>
                    Stack Overflow</a>
            </li>
        </ul>
    </div>
</nav>



    <div class="container">
        
<section class="post">
  <h1 class="post__title">pgAdmin4 on Fedora 33</h1>
  <h3 class="post__date"><span class="date">2021-04-15</span></h3>
  <div class="post__reading-time">4 minute read</div>
  <div class="post__tags">
    
    <a class="post__tags__tag" href="/tags/database">#database</a>&nbsp;
    
    <a class="post__tags__tag" href="/tags/fedora">#fedora</a>&nbsp;
    
    <a class="post__tags__tag" href="/tags/pgadmin">#pgadmin</a>&nbsp;
    
    <a class="post__tags__tag" href="/tags/postgres">#postgres</a>&nbsp;
    
    <a class="post__tags__tag" href="/tags/setup">#setup</a>&nbsp;
    
    <a class="post__tags__tag" href="/tags/tutorial">#tutorial</a>&nbsp;
    
  </div>
  <div class="post__content"><h2 id="useful-links">Useful links:</h2>
<ul>
<li>
<p><a href="https://www.youtube.com/watch?v=jDQjRHPRcgM&amp;list=PL061tjwVHN1gJIfXCHk4jc9aRacY0D9vR&amp;index=1&amp;t=581s">PostgreSQL Server Setup &amp; Monitor</a> (YouTube)</p>
</li>
<li>
<p><a href="https://computingforgeeks.com/how-to-install-postgresql-12-on-fedora/">How To Install PostgreSQL 12 on Fedora 33/32/31/30</a></p>
</li>
<li>
<p><a href="https://computingforgeeks.com/how-to-install-pgadmin-on-centos-fedora/">Install pgAdmin 4 on CentOS 7 &amp; Fedora 33/32/31/30</a></p>
</li>
</ul>
<p></p>
<h2 id="useful-commands">Useful commands:</h2>
<pre style="background-color:#f9f9f9;">
<code><span style="color:#c82728;">sudo</span><span style="color:#4271ae;"> dnf search postgresql12

</span><span style="color:#c82728;">dnf</span><span style="color:#4271ae;"> list installed </span><span style="color:#3e999f;">| </span><span style="color:#c82728;">grep</span><span style="color:#4271ae;"> postgresql12

</span><span style="color:#c82728;">systemctl</span><span style="color:#4271ae;"> status httpd
</span><span style="color:#c82728;">systemctl</span><span style="color:#4271ae;"> status postgresql-12

</span><span style="color:#c82728;">systemctl</span><span style="color:#4271ae;"> start httpd
</span><span style="color:#c82728;">systemctl</span><span style="color:#4271ae;"> start postgresql-12

</span><span style="color:#c82728;">systemctl</span><span style="color:#4271ae;"> stop httpd
</span><span style="color:#c82728;">systemctl</span><span style="color:#4271ae;"> stop postgresql-12

</span><span style="color:#c82728;">systemctl</span><span style="color:#4271ae;"> restart httpd
</span><span style="color:#c82728;">systemctl</span><span style="color:#4271ae;"> restart postgresql-12

</span><span style="color:#c82728;">man</span><span style="color:#4271ae;"> firewall-cmd

</span><span style="color:#c82728;">sudo</span><span style="color:#4271ae;"> netstat</span><span style="color:#f07219;"> -tupln
</span></code></pre>
<p><br />
</p>
<h2 id="step-1-install-postgresql">Step 1: Install PostgreSQL</h2>
<ol>
<li>
<p>First of all, update the system packages</p>
<pre style="background-color:#f9f9f9;">
<code><span style="color:#c82728;">sudo</span><span style="color:#4271ae;"> dnf update</span><span style="color:#f07219;"> -y </span><span style="color:#3e999f;">&amp;&amp; </span><span style="color:#c82728;">reboot
</span></code></pre></li>
<li>
<p>Add the PostgreSQL yum repository</p>
<p><strong>Download link:</strong> <a href="https://www.postgresql.org/download/linux/redhat/">https://www.postgresql.org/download/linux/redhat/</a></p>
<pre style="background-color:#f9f9f9;">
<code><span style="color:#8e908c;"># Install the repository RPM:
</span><span style="color:#c82728;">sudo</span><span style="color:#4271ae;"> dnf install</span><span style="color:#f07219;"> -y</span><span style="color:#4271ae;"> https://download.postgresql.org/pub/repos/yum/reporpms/F-33-x86_64/ pgdg-fedora-repo-latest.noarch.rpm

</span><span style="color:#8e908c;"># Install PostgreSQL:
</span><span style="color:#c82728;">sudo</span><span style="color:#4271ae;"> dnf install</span><span style="color:#f07219;"> -y</span><span style="color:#4271ae;"> postgresql12-server postgresql12

</span><span style="color:#8e908c;"># Initialize the database and enable automatic start:
</span><span style="color:#c82728;">sudo</span><span style="color:#4271ae;"> postgresql-12-setup initdb
</span><span style="color:#8e908c;"># If the above didn&#39;t work, then try the following:
</span><span style="color:#c82728;">sudo</span><span style="color:#4271ae;"> /usr/pgsql-12/bin/postgresql-12-setup initdb

</span><span style="color:#8e908c;"># Enable postgres server to start on boot:
</span><span style="color:#c82728;">sudo</span><span style="color:#4271ae;"> systemctl enable postgresql-12

</span><span style="color:#8e908c;"># Start postgres server:
</span><span style="color:#c82728;">sudo</span><span style="color:#4271ae;"> systemctl start postgresql-12
</span></code></pre></li>
<li>
<p>Firewall setting</p>
<pre style="background-color:#f9f9f9;">
<code><span style="color:#c82728;">sudo</span><span style="color:#4271ae;"> firewall-cmd</span><span style="color:#f07219;"> --add-port</span><span style="color:#3e999f;">=</span><span style="color:#4271ae;">5432/tcp</span><span style="color:#f07219;"> --permanent
</span><span style="color:#c82728;">sudo</span><span style="color:#4271ae;"> firewall-cmd</span><span style="color:#f07219;"> --reload
</span></code></pre></li>
<li>
<p>Edit <code>/var/lib/pgsql/12/data/postgresql.conf</code></p>
<p>Edit the line where it says <code>listen_addresses = '...'</code> to <code>listen_addresses = '*'</code> for remote access.</p>
<p>Mine is just set to <code>listen_addresses = 'localhost'</code> or <code>listen_addresses = '127.0.0.1'</code> since I don't need to remotely access to the database right now.</p>
</li>
<li>
<p>Notice that there is now <code>potgres</code> user with:</p>
<pre style="background-color:#f9f9f9;">
<code><span style="color:#c82728;">more</span><span style="color:#4271ae;"> /etc//passwd </span><span style="color:#3e999f;">| </span><span style="color:#c82728;">grep</span><span style="color:#4271ae;"> postgres

</span><span style="color:#8e908c;"># And then set the admin password with:
</span><span style="color:#c82728;">sudo</span><span style="color:#4271ae;"> passwd postgres
</span></code></pre>
<p><strong>IMPORTANT:</strong> Try not to forget the password.</p>
</li>
<li>
<p>Set PostgreSQL admin user’s password</p>
<pre style="background-color:#f9f9f9;">
<code><span style="color:#c82728;">sudo</span><span style="color:#4271ae;"> su - postgres

</span><span style="color:#8e908c;"># After running the line below,
</span><span style="color:#8e908c;"># it should print out `ALTER ROLE` if successful.
</span><span style="color:#c82728;">psql</span><span style="color:#f07219;"> -d</span><span style="color:#4271ae;"> template1</span><span style="color:#f07219;"> -c </span><span style="color:#839c00;">&quot;ALTER USER postgres WITH PASSWORD &#39;ReallyGoodPasswd&#39;;&quot;
</span></code></pre></li>
</ol>
<p>And that should be it for the installation of PostgreSQL!</p>
<p></p>
<h2 id="step-2-set-up-pgadmin4">Step 2: Set up pgAdmin4</h2>
<p>This one is fairly easier, so let's just do it :)</p>
<p><strong>Instruction link:</strong> <a href="https://www.pgadmin.org/download/pgadmin-4-rpm/">https://www.pgadmin.org/download/pgadmin-4-rpm/</a></p>
<ol>
<li>
<p>Uninstall any pgAdmin repo packages that you may already have installed:</p>
<pre style="background-color:#f9f9f9;">
<code><span style="color:#c82728;">sudo</span><span style="color:#4271ae;"> rpm</span><span style="color:#f07219;"> -e</span><span style="color:#4271ae;"> pgadmin4-fedora-repo
</span></code></pre></li>
<li>
<p>Set up the repository:</p>
<pre style="background-color:#f9f9f9;">
<code><span style="color:#c82728;">sudo</span><span style="color:#4271ae;"> rpm</span><span style="color:#f07219;"> -i</span><span style="color:#4271ae;"> https://ftp.postgresql.org/pub/pgadmin/pgadmin4/yum/pgadmin4-fedora-repo-1-1.noarch.rpm
</span></code></pre></li>
<li>
<p>Search for package:</p>
<pre style="background-color:#f9f9f9;">
<code><span style="color:#c82728;">sudo</span><span style="color:#4271ae;"> dnf search pgadmin4
</span></code></pre></li>
<li>
<p>Install the package:</p>
<pre style="background-color:#f9f9f9;">
<code><span style="color:#c82728;">sudo</span><span style="color:#4271ae;"> dnf install pgadmin4.noarch
</span></code></pre></li>
<li>
<p>Finally, run the web setup script to configure the system to run in web mode:</p>
<pre style="background-color:#f9f9f9;">
<code><span style="color:#c82728;">sudo</span><span style="color:#4271ae;"> /usr/pgadmin4/bin/setup-web.sh
</span></code></pre></li>
</ol>
<p>That should be it for the installation of pgAdmin4, though I could be missing somthing. If that seems like the case, please go to <a href="https://computingforgeeks.com/how-to-install-pgadmin-on-centos-fedora/">Install pgAdmin 4 on CentOS 7 &amp; Fedora 33/32/31/30</a> and try to figure it out.</p>
<p></p>
<h2 id="finally">Finally</h2>
<ol>
<li>
<p>You might have to open <code>/var/lib/pgsql/12/data/pg_hba.conf</code> with:</p>
<pre style="background-color:#f9f9f9;">
<code><span style="color:#c82728;">sudo</span><span style="color:#4271ae;"> nano /var/lib/pgsql/12/data/pg_hba.conf
</span></code></pre>
<p>And change <code>peer</code> and <code>ident</code> to <code>md5</code>.</p>
<pre style="background-color:#f9f9f9;">
<code><span style="color:#8e908c;"># TYPE  DATABASE        USER            ADDRESS                 METHOD

</span><span style="color:#8e908c;"># &quot;local&quot; is for Unix domain socket connections only
</span><span style="color:#8959a8;">local   </span><span style="color:#c82728;">all             all                                     md5
</span><span style="color:#8e908c;"># IPv4 local connections:
</span><span style="color:#c82728;">host</span><span style="color:#4271ae;">    all             all             127.0.0.1/32            md5
</span></code></pre></li>
</ol>
<p>And...that really should be it?</p>
<p><br />
</p>
<h3 id="optional">Optional:</h3>
<p>Let's create a test database!</p>
<pre style="background-color:#f9f9f9;">
<code><span style="color:#c82728;">su</span><span style="color:#4271ae;"> - postgres
</span></code></pre><pre style="background-color:#f9f9f9;">
<code><span style="color:#8e908c;"># Create a new test database:
</span><span style="color:#c82728;">createdb</span><span style="color:#4271ae;"> newtestdb
</span></code></pre><pre style="background-color:#f9f9f9;">
<code><span style="color:#111111;">psql newtestdb

# List all the databases:
\l

CREATE TABLE employees (eid int, fname varchar, lname varchar);

INSERT INTO employees VALUES (1, &#39;Peter&#39;, &#39;Smith&#39;);

SELECT * FROM employees;
</span></code></pre>
<p>To exit <code>psql</code>, run</p>
<pre style="background-color:#f9f9f9;">
<code><span style="color:#111111;">\q
</span></code></pre>
<p>And to exit <code>postgres user</code>, run</p>
<pre style="background-color:#f9f9f9;">
<code><span style="color:#111111;">exit
</span></code></pre>
<p>Now you can also open up your pgAdmin4 by going to <code>localhost/pgadmin4</code> or maybe <code>127.0.0.1/pgadmin4</code> and you should be able to see the database created!</p>
<p>Though, if it's your first time ever opening up pgAdmin4, <strong><em>you will have to connect it to the postgres server.</em></strong> So just simply follow the very last part of <a href="https://computingforgeeks.com/how-to-install-pgadmin-on-centos-fedora/">Install pgAdmin 4 on CentOS 7 &amp; Fedora 33/32/31/30</a>, and you should be good to go.</p>
<p>Also, don't forget to:</p>
<pre style="background-color:#f9f9f9;">
<code><span style="color:#c82728;">systemctl</span><span style="color:#4271ae;"> start httpd
</span><span style="color:#c82728;">systemctl</span><span style="color:#4271ae;"> start postgresql-12
</span></code></pre>
<p>You can check if they're running with:</p>
<pre style="background-color:#f9f9f9;">
<code><span style="color:#c82728;">systemctl</span><span style="color:#4271ae;"> status httpd
</span><span style="color:#c82728;">systemctl</span><span style="color:#4271ae;"> status postgresql-12
</span></code></pre>
<p>I hope it helped!</p>
</div>
  <div class="btn__wrapper">
    <a href="/blog" class="btn btn--more btn--ripple btn--more--post"><span class="btn--ripple__source"></span>Read
      more
      posts</a>
  </div>
</section>

    </div>
    
<footer class="footer">
    <p>&copy; <span id="currentYear"></span> <a href="http://github.com/sjinno" class="footer__author"
            target="_blank">Shohei Jinno</a>
    </p>
    <p>
        <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/" target="_blank" class="footer__cc">
            <img alt="Creative Commons License" style="border-width:0"
                src="https://i.creativecommons.org/l/by-sa/4.0/88x31.png" />
        </a>
    </p>
</footer>


    <script src="/js/main.js"></script>

</html>